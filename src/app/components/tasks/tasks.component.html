<div class="container">
    <div class="row mt-2">
        <div class="col-8">
            <div class="card">
                <div class="card-header">
                    Tasks
                </div>
                <div class="card-body">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Category</th>
                                <th>Title</th>
                                <th>description</th>
                                <th>Status</th>
                                <th>Pirioty</th>
                                <th>Due Date</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            @for (item of tasksList; track $index) {
                            <tr>
                                <td>{{$index+1}}</td>
                                <td>{{item.category.name}}</td>
                                <td>{{item.title}}</td>
                                <td>{{item.description}}</td>
                                <td >
                                    {{item.status |status }}
                                </td>
                                <td>{{item.priority|pirority }}</td>
                                <td>{{item.dueDate | date }}</td>

                                <td>
                                    <button class="btn btn-success" (click)="onEdit(item)">Edit</button>
                                    <button class="btn btn-danger mx-1" (click)="onDelete(item.id)">delete</button>
                                </td>
                            </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="col-4">
            <div class="card">
                <div class="card-header">
                    Create New Task
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-12">
                            <label for="">Category Id</label>
                            <select [(ngModel)]="taskobj.categoryId" class="form-control" name="categoryId" id="">
                                @for (item of categoriesList; track $index) {
                                <option [value]="item.id">{{item.name}}</option>
                                }
                            </select>
                        </div>
                        <div class="col-12">
                            <label for="">Title</label>
                            <input [(ngModel)]="taskobj.title" type="text" class="form-control">
                        </div>
                        <div class="col-12">
                            <label for="">description</label>
                            <input [(ngModel)]="taskobj.description" type="text" class="form-control">
                        </div>

                        <div class="col-12">
                        <label for="status">Status</label>
                        <select [(ngModel)]="taskobj.status" class="form-control">
                            <option [ngValue]="true">True</option>
                            <option [ngValue]="false">False</option>
                        </select>
                    </div>



                        <div class="col-12">
                            <label for="">priority</label>

                            <select [(ngModel)]="taskobj.priority" class="form-control">
                                <option [ngValue]="3">High</option>
                                <option [ngValue]="2">Medium</option>
                                <option [ngValue]="1">Low</option>
                            </select>
                        </div>

                        <div class="col-12">
                            <label for="">Due Date</label>
                            <input [(ngModel)]="taskobj.dueDate" type="date" class="form-control">
                        </div>

                    </div>
                </div>
                <div class="card-footer">
                    <button class="btn btn-secondary" (click)="onReset()">Reset</button>

                    @if (taskobj.id === 0) {
                    <button class="btn btn-success mx-2" (click)="onSave()">Save</button>
                    }@else{
                    <button class="btn btn-warning mx-2" (click)="onUpdate()">update</button>
                    }
                </div>
            </div>
        </div>
    </div>
</div>